{"ast":null,"code":"var _jsxFileName = \"/home/jafet/projetos/sd-03-recipes-app-03/src/pages/DetailsPage/DetailsMealsPage/DetailsMealsPage.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { DetailsPageContext } from '../DetailsPageProvider';\nimport DetailsRecipesPage from './DetailsRecipesPage';\nimport { fetchMealById, fetchMeals } from '../../../services/theMealAPI';\nimport { fetchDrinkById, fetchDrinks } from '../../../services/theCockTailAPI';\n\nconst DetailsMealsPage = props => {\n  const [data, setData] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    setProviderDataFunc,\n    setPathNameFunc,\n    setProviderRecommendedFunc\n  } = useContext(DetailsPageContext);\n  const {\n    match: {\n      params: {\n        id\n      }\n    },\n    location: {\n      pathname\n    }\n  } = props;\n\n  const apiRequestSucceedMeal = ({\n    meals\n  }) => {\n    if (!pathname.includes('/comidas')) return setProviderRecommendedFunc(meals);\n    setData(meals[0]);\n    setProviderDataFunc(meals[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n\n  const apiRequestSucceedDrink = ({\n    drinks\n  }) => {\n    if (!pathname.includes('/bebidas')) return setProviderRecommendedFunc(drinks);\n    setData(drinks[0]);\n    setProviderDataFunc(drinks[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n\n  const apiRequestFailure = ({\n    message\n  }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const apiRequestFunction = (callback, id = '') => {\n      setIsLoading(true);\n\n      if (callback === fetchMealById || callback === fetchMeals) {\n        return callback(id).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n\n      return callback(id).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n\n    if (pathname.includes('/comidas')) {\n      apiRequestFunction(fetchMealById, id);\n      apiRequestFunction(fetchDrinks);\n    } else {\n      apiRequestFunction(fetchDrinkById, id);\n      apiRequestFunction(fetchMeals);\n    }\n  }, [pathname]);\n  console.log(data);\n  console.log(errorMessage);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(DetailsRecipesPage, {\n    renderControl: {\n      isLoading,\n      errorMessage,\n      data\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  })); // const dataDestructure = (data) => data.idMeal ? destructureMeal(data) : destructureDrinks(data);\n  // if (isLoading) return <div>Loading...</div>;\n  // if (errorMessage !== '') return <span>Algum Error Ocorreu</span>;\n  // return <div><MealsComponent data={dataDestructure(data)} /></div>;\n};\n\nexport default DetailsMealsPage;\nDetailsMealsPage.propTypes = {\n  match: PropTypes.objectOf(PropTypes.any).isRequired\n}; // DetailsMealsPage.defaultProps = {\n//   id: '',\n// }","map":{"version":3,"sources":["/home/jafet/projetos/sd-03-recipes-app-03/src/pages/DetailsPage/DetailsMealsPage/DetailsMealsPage.js"],"names":["React","useEffect","useState","useContext","PropTypes","DetailsPageContext","DetailsRecipesPage","fetchMealById","fetchMeals","fetchDrinkById","fetchDrinks","DetailsMealsPage","props","data","setData","errorMessage","setErrorMessage","isLoading","setIsLoading","setProviderDataFunc","setPathNameFunc","setProviderRecommendedFunc","match","params","id","location","pathname","apiRequestSucceedMeal","meals","includes","apiRequestSucceedDrink","drinks","apiRequestFailure","message","apiRequestFunction","callback","then","console","log","propTypes","objectOf","any","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { DetailsPageContext } from '../DetailsPageProvider';\nimport DetailsRecipesPage from './DetailsRecipesPage';\nimport { fetchMealById, fetchMeals } from '../../../services/theMealAPI';\nimport { fetchDrinkById, fetchDrinks } from '../../../services/theCockTailAPI';\n\nconst DetailsMealsPage = (props) => {\n  const [data, setData] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { setProviderDataFunc, setPathNameFunc, setProviderRecommendedFunc } = useContext(DetailsPageContext)\n  const { match: { params: { id } }, location: { pathname } } = props;\n  const apiRequestSucceedMeal = ({ meals }) => {\n    if (!pathname.includes('/comidas')) return setProviderRecommendedFunc(meals);\n    setData(meals[0]);\n    setProviderDataFunc(meals[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n  const apiRequestSucceedDrink = ({ drinks }) => {\n    if (!pathname.includes('/bebidas')) return setProviderRecommendedFunc(drinks);\n    setData(drinks[0]);\n    setProviderDataFunc(drinks[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n  const apiRequestFailure = ({ message }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n  useEffect(() => {\n    const apiRequestFunction = (callback, id = '') => {\n      setIsLoading(true);\n      if (callback === fetchMealById || callback === fetchMeals) {\n        return callback(id).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n      return callback(id).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n    if (pathname.includes('/comidas')) {\n      apiRequestFunction(fetchMealById, id);\n      apiRequestFunction(fetchDrinks);\n    } else {\n      apiRequestFunction(fetchDrinkById, id);\n      apiRequestFunction(fetchMeals);\n    }\n  }, [pathname]);\n  console.log(data)\n  console.log(errorMessage)\n  return <div><DetailsRecipesPage renderControl={{ isLoading, errorMessage, data }} /></div>\n  // const dataDestructure = (data) => data.idMeal ? destructureMeal(data) : destructureDrinks(data);\n  // if (isLoading) return <div>Loading...</div>;\n  // if (errorMessage !== '') return <span>Algum Error Ocorreu</span>;\n  // return <div><MealsComponent data={dataDestructure(data)} /></div>;\n};\n\nexport default DetailsMealsPage;\n\nDetailsMealsPage.propTypes = {\n  match: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\n// DetailsMealsPage.defaultProps = {\n//   id: '',\n// }\n"]},"metadata":{},"sourceType":"module"}