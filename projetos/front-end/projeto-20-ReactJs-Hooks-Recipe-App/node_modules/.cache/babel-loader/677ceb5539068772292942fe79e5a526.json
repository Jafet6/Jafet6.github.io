{"ast":null,"code":"var _jsxFileName = \"/home/jafet/projetos/sd-03-recipes-app-03/src/components/Favorite/FavoriteButton.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport whiteHeartIcon from \"../../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../../images/blackHeartIcon.svg\";\nimport FoodContext from '../../pages/FoodMainPage/Context/FoodContext';\nimport './FavoriteButton.css';\n\nconst recipeObject = (recipe, type) => {\n  if (type === 'comidas') {\n    return {\n      id: recipe.id,\n      type: 'comida',\n      area: recipe.area,\n      category: recipe.category,\n      alcoholicOrNot: '',\n      name: recipe.name,\n      image: recipe.img\n    };\n  }\n\n  return {\n    id: recipe.id,\n    type: 'bebida',\n    area: '',\n    category: recipe.category,\n    alcoholicOrNot: recipe.alcoholic,\n    name: recipe.name,\n    image: recipe.img\n  };\n};\n\nconst FavoriteButton = ({\n  recipe,\n  index\n}) => {\n  const [NotFavorited, setNotFavorited] = useState(true);\n  const [srcIcon, setSrcIcon] = useState(whiteHeartIcon);\n  const {\n    setStorage\n  } = useContext(FoodContext);\n  useEffect(() => {\n    if (!localStorage.getItem('favoriteRecipes')) {\n      localStorage.setItem('favoriteRecipes', JSON.stringify([]));\n    } else {\n      const favoriteds = JSON.parse(localStorage.getItem('favoriteRecipes'));\n\n      if (favoriteds.some(favorited => favorited.id === recipe.id)) {\n        setNotFavorited(false);\n        setSrcIcon(blackHeartIcon);\n      }\n    }\n  }, []);\n\n  const addToLocalStorage = () => {\n    const recipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const newRecipe = recipes.concat(recipeObject(recipe, recipe.type));\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newRecipe));\n    setSrcIcon(blackHeartIcon);\n    return null;\n  };\n\n  const removeLocalStorage = () => {\n    const recipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const newRecipe = recipes.filter(element => element.id !== recipe.id);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newRecipe));\n    setSrcIcon(whiteHeartIcon);\n    return null;\n  };\n\n  const handleFavorite = () => {\n    if (NotFavorited) {\n      addToLocalStorage();\n    } else {\n      removeLocalStorage();\n    }\n\n    setStorage(() => JSON.parse(localStorage.getItem('favoriteRecipes')));\n    return setNotFavorited(currentState => !currentState);\n  };\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"transparentBtn\",\n    onClick: () => handleFavorite(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": typeof index === 'number' ? `${index}-horizontal-favorite-btn` : 'favorite-btn',\n    src: srcIcon,\n    alt: \"Icone para favoritar receita\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }));\n};\n\nFavoriteButton.defaultProps = {\n  index: undefined\n};\nFavoriteButton.propTypes = {\n  recipe: PropTypes.objectOf(PropTypes.any).isRequired,\n  index: PropTypes.number\n};\nexport default FavoriteButton;","map":{"version":3,"sources":["/home/jafet/projetos/sd-03-recipes-app-03/src/components/Favorite/FavoriteButton.js"],"names":["React","useState","useEffect","useContext","PropTypes","FoodContext","recipeObject","recipe","type","id","area","category","alcoholicOrNot","name","image","img","alcoholic","FavoriteButton","index","NotFavorited","setNotFavorited","srcIcon","setSrcIcon","whiteHeartIcon","setStorage","localStorage","getItem","setItem","JSON","stringify","favoriteds","parse","some","favorited","blackHeartIcon","addToLocalStorage","recipes","newRecipe","concat","removeLocalStorage","filter","element","handleFavorite","currentState","defaultProps","undefined","propTypes","objectOf","any","isRequired","number"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport whiteHeartIcon from '../../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../../images/blackHeartIcon.svg';\nimport FoodContext from '../../pages/FoodMainPage/Context/FoodContext';\nimport './FavoriteButton.css';\n\nconst recipeObject = (recipe, type) => {\n  if (type === 'comidas') {\n    return {\n      id: recipe.id,\n      type: 'comida',\n      area: recipe.area,\n      category: recipe.category,\n      alcoholicOrNot: '',\n      name: recipe.name,\n      image: recipe.img,\n    };\n  }\n  return {\n    id: recipe.id,\n    type: 'bebida',\n    area: '',\n    category: recipe.category,\n    alcoholicOrNot: recipe.alcoholic,\n    name: recipe.name,\n    image: recipe.img,\n  };\n};\n\nconst FavoriteButton = ({ recipe, index }) => {\n  const [NotFavorited, setNotFavorited] = useState(true);\n  const [srcIcon, setSrcIcon] = useState(whiteHeartIcon);\n  const { setStorage } = useContext(FoodContext);\n  useEffect(() => {\n    if (!localStorage.getItem('favoriteRecipes')) {\n      localStorage.setItem('favoriteRecipes', JSON.stringify([]));\n    } else {\n      const favoriteds = JSON.parse(localStorage.getItem('favoriteRecipes'));\n      if (favoriteds.some((favorited) => favorited.id === recipe.id)) {\n        setNotFavorited(false);\n        setSrcIcon(blackHeartIcon);\n      }\n    }\n  }, []);\n  const addToLocalStorage = () => {\n    const recipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const newRecipe = recipes.concat(recipeObject(recipe, recipe.type));\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newRecipe));\n    setSrcIcon(blackHeartIcon);\n    return null;\n  };\n  const removeLocalStorage = () => {\n    const recipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const newRecipe = recipes.filter((element) => element.id !== recipe.id);\n    localStorage.setItem('favoriteRecipes', JSON.stringify(newRecipe));\n    setSrcIcon(whiteHeartIcon);\n    return null;\n  };\n  const handleFavorite = () => {\n    if (NotFavorited) {\n      addToLocalStorage();\n    } else {\n      removeLocalStorage();\n    }\n    setStorage(() => JSON.parse(localStorage.getItem('favoriteRecipes')));\n    return setNotFavorited((currentState) => !currentState);\n  };\n  return (\n    <button className=\"transparentBtn\" onClick={() => handleFavorite()}>\n      <img\n        data-testid={\n          typeof (index) === 'number' ? `${index}-horizontal-favorite-btn` : 'favorite-btn'\n        }\n        src={srcIcon} alt=\"Icone para favoritar receita\"\n      />\n    </button>\n  );\n};\n\nFavoriteButton.defaultProps = {\n  index: undefined,\n};\n\nFavoriteButton.propTypes = {\n  recipe: PropTypes.objectOf(PropTypes.any).isRequired,\n  index: PropTypes.number,\n};\n\nexport default FavoriteButton;\n"]},"metadata":{},"sourceType":"module"}