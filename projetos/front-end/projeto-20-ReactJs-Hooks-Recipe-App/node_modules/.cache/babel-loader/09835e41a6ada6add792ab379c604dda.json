{"ast":null,"code":"var _jsxFileName = \"/home/jafet/projetos/sd-03-recipes-app-03/src/pages/DetailsPage/DetailsMealsPage/DetailsMealsPage.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { DetailsPageContext } from '../DetailsPageProvider';\nimport PropTypes from 'prop-types';\nimport MealsComponent from './MealsComponent';\nimport { fetchMealById, fetchMeals } from '../../../services/theMealAPI';\nimport { fetchDrinkById, fetchDrinks } from '../../../services/theCockTailAPI';\n\nconst destructureMeal = data => {\n  const {\n    strMeal: name,\n    strCategory: category,\n    strMealThumb: img,\n    strYoutube: video,\n    strInstructions: instructions,\n    idMeal: id\n  } = data;\n  const dataObj = {\n    name,\n    category,\n    img,\n    video,\n    instructions,\n    id,\n    init: 9,\n    mid: 29,\n    end: 49,\n    type: 'comidas'\n  };\n  return dataObj;\n};\n\nconst destructureDrinks = data => {\n  const {\n    strDrink: name,\n    strAlcoholic: category,\n    strDrinkThumb: img,\n    strInstructions: instructions,\n    idDrink: id\n  } = data;\n  const dataObj = {\n    name,\n    category,\n    img,\n    instructions,\n    id,\n    init: 21,\n    mid: 36,\n    end: 51,\n    type: 'bebidas'\n  };\n  return dataObj;\n};\n\nconst DetailsMealsPage = props => {\n  const [data, setData] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    setProviderDataFunc,\n    setPathNameFunc\n  } = useContext(DetailsPageContext);\n  const {\n    match: {\n      params: {\n        id\n      }\n    },\n    location: {\n      pathname\n    }\n  } = props;\n\n  const apiRequestSucceedMeal = ({\n    meals\n  }) => {\n    if (!pathname.includes('/comidas')) return setProviderRecommendedFunc(meals[0]);\n    setData(meals[0]);\n    setProviderDataFunc(meals[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n\n  const apiRequestSucceedDrink = ({\n    drinks\n  }) => {\n    if (!pathname.includes('/bebidas')) return setProviderRecommendedFunc(drinks[0]);\n    setData(drinks[0]);\n    setProviderDataFunc(drinks[0]);\n    setPathNameFunc(pathname);\n    setIsLoading(false);\n  };\n\n  const apiRequestFailure = ({\n    message\n  }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const apiRequestFunctionById = (callback, id = '') => {\n      setIsLoading(true);\n\n      if (callback === fetchMealById) {\n        return callback(id).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n\n      return callback(id).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n\n    const apiRequestFunction = callback => {\n      if (callback === fetchMeals) {\n        return callback().then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n\n      return callback().then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n\n    if (pathname.includes('/comidas')) {\n      apiRequestFunctionById(fetchMealById, id);\n      apiRequestFunction(fetchDrinks);\n    } else {\n      apiRequestFunctionById(fetchDrinkById, id);\n      apiRequestFunction(fetchMeals);\n    }\n  }, []);\n\n  const dataDestructure = data => data.idMeal ? destructureMeal(data) : destructureDrinks(data);\n\n  if (isLoading) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, \"Loading...\");\n  if (errorMessage !== '') return /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 35\n    }\n  }, \"Algum Error Ocorreu\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(MealsComponent, {\n    data: dataDestructure(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }));\n};\n\nexport default DetailsMealsPage;\nDetailsMealsPage.propTypes = {\n  match: PropTypes.objectOf(PropTypes.any).isRequired\n}; // DetailsMealsPage.defaultProps = {\n//   id: '',\n// }","map":{"version":3,"sources":["/home/jafet/projetos/sd-03-recipes-app-03/src/pages/DetailsPage/DetailsMealsPage/DetailsMealsPage.js"],"names":["React","useEffect","useState","useContext","DetailsPageContext","PropTypes","MealsComponent","fetchMealById","fetchMeals","fetchDrinkById","fetchDrinks","destructureMeal","data","strMeal","name","strCategory","category","strMealThumb","img","strYoutube","video","strInstructions","instructions","idMeal","id","dataObj","init","mid","end","type","destructureDrinks","strDrink","strAlcoholic","strDrinkThumb","idDrink","DetailsMealsPage","props","setData","errorMessage","setErrorMessage","isLoading","setIsLoading","setProviderDataFunc","setPathNameFunc","match","params","location","pathname","apiRequestSucceedMeal","meals","includes","setProviderRecommendedFunc","apiRequestSucceedDrink","drinks","apiRequestFailure","message","apiRequestFunctionById","callback","then","apiRequestFunction","dataDestructure","propTypes","objectOf","any","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { DetailsPageContext } from '../DetailsPageProvider';\nimport PropTypes from 'prop-types';\nimport MealsComponent from './MealsComponent';\nimport { fetchMealById, fetchMeals } from '../../../services/theMealAPI'\nimport { fetchDrinkById, fetchDrinks } from '../../../services/theCockTailAPI';\n\n\nconst destructureMeal = (data) => {\n  const {\n    strMeal:name,strCategory:category, strMealThumb:img, strYoutube:video,\n    strInstructions:instructions, idMeal:id,\n  } = data;\n  const dataObj = {\n    name, category, img, video, instructions, id, init: 9, mid: 29, end: 49, type: 'comidas',\n  };\n  return dataObj;\n};\n\nconst destructureDrinks = (data) => {\n  const {\n    strDrink:name, strAlcoholic:category, strDrinkThumb:img,\n    strInstructions:instructions, idDrink:id,\n  } = data;\n  const dataObj = {\n    name, category, img, instructions, id, init: 21, mid: 36, end: 51, type: 'bebidas',\n  }\n  return dataObj;\n};\n\nconst DetailsMealsPage = (props) => {\n  const [data, setData] = useState([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { setProviderDataFunc, setPathNameFunc } = useContext(DetailsPageContext)\n  const { match: { params: { id } }, location: { pathname } } = props;\n  const apiRequestSucceedMeal = ({ meals }) => {\n    if (!pathname.includes('/comidas')) return setProviderRecommendedFunc(meals[0]);\n    setData(meals[0]);\n    setProviderDataFunc(meals[0]);\n    setPathNameFunc(pathname)\n    setIsLoading(false);\n  };\n  const apiRequestSucceedDrink = ({ drinks }) => {\n    if (!pathname.includes('/bebidas')) return setProviderRecommendedFunc(drinks[0]);\n    setData(drinks[0]);\n    setProviderDataFunc(drinks[0]);\n    setPathNameFunc(pathname)\n    setIsLoading(false);\n  };\n  const apiRequestFailure = ({ message }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n  useEffect(() => {\n    const apiRequestFunctionById = (callback, id = '') => {\n      setIsLoading(true);\n      if (callback === fetchMealById) {\n        return callback(id).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n      return callback(id).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n    const apiRequestFunction = (callback) => {\n      if (callback === fetchMeals) {\n        return callback().then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n      return callback().then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n    if (pathname.includes('/comidas')) {\n      apiRequestFunctionById(fetchMealById, id);\n      apiRequestFunction(fetchDrinks);\n    } else {\n      apiRequestFunctionById(fetchDrinkById, id);\n      apiRequestFunction(fetchMeals);\n    }\n  }, []);\n  const dataDestructure = (data) => data.idMeal ? destructureMeal(data) : destructureDrinks(data);\n  if (isLoading) return <div>Loading...</div>;\n  if (errorMessage !== '') return <span>Algum Error Ocorreu</span>;\n  return <div><MealsComponent data={dataDestructure(data)} /></div>;\n};\n\nexport default DetailsMealsPage;\n\nDetailsMealsPage.propTypes = {\n  match: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\n// DetailsMealsPage.defaultProps = {\n//   id: '',\n// }\n"]},"metadata":{},"sourceType":"module"}