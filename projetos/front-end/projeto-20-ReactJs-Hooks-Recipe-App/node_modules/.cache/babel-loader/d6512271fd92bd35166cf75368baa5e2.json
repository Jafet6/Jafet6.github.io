{"ast":null,"code":"var _jsxFileName = \"/home/jafet/projetos/sd-03-recipes-app-03/src/pages/RecipesInProgress/RecipesInProgressPage/RecipesInProgressContent.js\";\nimport React, { useContext, useState, useEffect } from 'react'; // import PropTypes from 'prop-types';\n// import { DetailsPageContext } from '../DetailsPage/DetailsPageProvider';\n\nimport { useLocation, useParams } from 'react-router-dom';\nimport { RecipeInProgressContext } from '../RecipeInProgressProvider';\nimport { fetchMealById } from '../../../services/theMealAPI';\nimport { fetchDrinkById } from '../../../services/theCockTailAPI';\nimport RecipesInProgressPage from './RecipesInProgressPage';\n\nconst createLocalStorage = (id, type) => {\n  if (JSON.parse(localStorage.getItem('inProgressRecipes')).cocktails.id || JSON.parse(localStorage.getItem('inProgressRecipes')).meals.id) return null;\n\n  if (JSON.parse(localStorage.getItem('inProgressRecipes'))) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (type === 'comidas') {\n      const inProgressRecipes = { ...inProgress,\n        meals: { ...inProgress.meals,\n          [id]: []\n        }\n      };\n      return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    } else if (type !== 'comidas') {\n      const inProgressRecipes = { ...inProgress,\n        cocktails: { ...inProgress.cocktails,\n          [id]: []\n        }\n      };\n      return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const inProgressRecipes = {\n      cocktails: {},\n      meals: {}\n    };\n    return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  }\n};\n\nconst RecipesInProgressContent = () => {\n  const {\n    setRecipeDataFunc\n  } = useContext(RecipeInProgressContext);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    pathname\n  } = useLocation();\n  const {\n    id\n  } = useParams();\n\n  const apiRequestSucceedMeal = ({\n    meals\n  }) => {\n    setRecipeDataFunc(meals[0]);\n    return setIsLoading(false);\n  };\n\n  const apiRequestSucceedDrink = ({\n    drinks\n  }) => {\n    setRecipeDataFunc(drinks[0]);\n    return setIsLoading(false);\n  };\n\n  const apiRequestFailure = ({\n    message\n  }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const apiRequestFunction = (callback, recipeId) => {\n      setIsLoading(true);\n\n      if (callback === fetchMealById) {\n        return callback(recipeId).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n\n      return callback(recipeId).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n\n    if (pathname.includes('/comidas')) {\n      apiRequestFunction(fetchMealById, id);\n      createLocalStorage(id, 'comidas');\n    } else {\n      apiRequestFunction(fetchDrinkById, id);\n      createLocalStorage(id);\n    }\n  }, [pathname]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(RecipesInProgressPage, {\n    renderControl: {\n      isLoading,\n      errorMessage\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default RecipesInProgressContent; // RecipesInProgressContent.propTypes = {\n// };","map":{"version":3,"sources":["/home/jafet/projetos/sd-03-recipes-app-03/src/pages/RecipesInProgress/RecipesInProgressPage/RecipesInProgressContent.js"],"names":["React","useContext","useState","useEffect","useLocation","useParams","RecipeInProgressContext","fetchMealById","fetchDrinkById","RecipesInProgressPage","createLocalStorage","id","type","JSON","parse","localStorage","getItem","cocktails","meals","inProgress","inProgressRecipes","setItem","stringify","RecipesInProgressContent","setRecipeDataFunc","errorMessage","setErrorMessage","isLoading","setIsLoading","pathname","apiRequestSucceedMeal","apiRequestSucceedDrink","drinks","apiRequestFailure","message","apiRequestFunction","callback","recipeId","then","includes"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\n// import PropTypes from 'prop-types';\n// import { DetailsPageContext } from '../DetailsPage/DetailsPageProvider';\nimport { useLocation, useParams } from 'react-router-dom';\nimport { RecipeInProgressContext } from '../RecipeInProgressProvider';\nimport { fetchMealById } from '../../../services/theMealAPI';\nimport { fetchDrinkById } from '../../../services/theCockTailAPI';\nimport RecipesInProgressPage from './RecipesInProgressPage';\n\nconst createLocalStorage = (id, type) => {\n  if (JSON.parse(localStorage.getItem('inProgressRecipes')).cocktails.id\n    || JSON.parse(localStorage.getItem('inProgressRecipes')).meals.id\n  ) return null\n  if (JSON.parse(localStorage.getItem('inProgressRecipes'))) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'))\n    if (type === 'comidas') {\n      const inProgressRecipes = {\n        ...inProgress,\n        meals: {\n          ...inProgress.meals,\n          [id]: [],\n        }\n      }\n      return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes))\n    } else if (type !== 'comidas') {\n      const inProgressRecipes = {\n        ...inProgress,\n        cocktails: {\n          ...inProgress.cocktails,\n          [id]: [],\n        }\n      }\n      return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes))\n    }\n    const inProgressRecipes = { cocktails: {}, meals: {} }\n    return localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes))\n  }\n}\n\nconst RecipesInProgressContent = () => {\n  const { setRecipeDataFunc } = useContext(RecipeInProgressContext);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const { pathname } = useLocation();\n  const { id } = useParams();\n\n  const apiRequestSucceedMeal = ({ meals }) => {\n    setRecipeDataFunc(meals[0]);\n    return setIsLoading(false);\n  };\n\n  const apiRequestSucceedDrink = ({ drinks }) => {\n    setRecipeDataFunc(drinks[0]);\n    return setIsLoading(false);\n  };\n\n  const apiRequestFailure = ({ message }) => {\n    setErrorMessage(message);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    const apiRequestFunction = (callback, recipeId) => {\n      setIsLoading(true);\n      if (callback === fetchMealById) {\n        return callback(recipeId).then(apiRequestSucceedMeal, apiRequestFailure);\n      }\n      return callback(recipeId).then(apiRequestSucceedDrink, apiRequestFailure);\n    };\n    if (pathname.includes('/comidas')) {\n      apiRequestFunction(fetchMealById, id);\n      createLocalStorage(id, 'comidas');\n    } else {\n      apiRequestFunction(fetchDrinkById, id);\n      createLocalStorage(id);\n    }\n  }, [pathname]);\n\n  return (\n    <div>\n      <RecipesInProgressPage renderControl={{ isLoading, errorMessage }} />\n    </div>\n  );\n};\n\nexport default RecipesInProgressContent;\n\n// RecipesInProgressContent.propTypes = {\n\n// };\n"]},"metadata":{},"sourceType":"module"}